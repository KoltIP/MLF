@using PetProject.Web.Pages.Advertisement.Models.Advertisement
@using PetProject.Web.Pages.Advertisement.Services.Advertisement
@inherits MudComponentBase

@inject IAdvertisementService advertisementService

<MudDialog>
    <DialogContent>
        <MudForm Model="model" @ref="form">
            <MudGrid>

                <MudItem xs="12">
                    <MudImage
                        Width="200"
                        Height="150"
                        Src="http://t0.gstatic.com/licensed-image?q=tbn:ANd9GcQkrjYxSfSHeCEA7hkPy8e2JphDsfFHZVKqx-3t37E4XKr-AT7DML8IwtwY0TnZsUcQ" 
                        Alt="Mony the dog"
                        Elevation="25" 
                        Class="rounded-lg" />
                </MudItem>

                <MudItem xs="12">
                    <MudTextField Label="Name" @bind-Value="model.PetName"
                                  For="@(() => model.PetName)">
                    </MudTextField>
                </MudItem>


                <MudItem xs="12" >
                    <MudTextField Label="Description"
                                  For="@(() => model.PetDescription)"
                                  @bind-Value="model.PetDescription">
                    </MudTextField>
                </MudItem>


                <MudItem xs="12" >
                    <MudTextField Label="Price"
                                  For="@(() => model.Price)"
                                  @bind-Value="model.Price">
                    </MudTextField>
                </MudItem>

                <MudItem xs="12">
                    <MudTextField Label="Created Date"
                                  For="@(() => model.CreatedDate)"
                                  @bind-Value="model.CreatedDate">
                    </MudTextField>
                </MudItem>


                <MudItem xs="12" sm="6">
                    <MudTextField Label="Type"
                                  For="@(() => model.PetType)"
                                  @bind-Value="model.PetType">
                    </MudTextField>
                </MudItem>



                <MudItem xs="12" sm="6">
                    <MudTextField Label="Breed"
                                  For="@(() => model.PetBreed)"
                                  @bind-Value="model.PetBreed">
                    </MudTextField>
                </MudItem>

                <MudItem xs="12" sm="6">
                    <MudTextField Label="Color"
                                  For="@(() => model.PetColor)"
                                  @bind-Value="model.PetColor">
                    </MudTextField>
                </MudItem>



            </MudGrid>
        </MudForm>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel">Cancel</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter]
    MudDialogInstance MudDialog { get; set; } = default!;

    MudForm form = default!;

    bool isNew = false;

    [Parameter]
    public int? AdvertisementId { get; set; } = default;


    public AdvertisementListItems model { get; set; } = new AdvertisementListItems();

    protected override async Task OnInitializedAsync()
    { 

        var advertisement = await advertisementService.GetAdvertisement(AdvertisementId ?? 0);

        model.PetName = advertisement.PetName;
        model.PetDescription = advertisement.PetDescription;
        model.Price = advertisement.Price;
        model.Id = advertisement.Id;
        model.PetType = advertisement.PetType;
        model.PetTypeId = advertisement.PetTypeId;
        model.PetBreed = advertisement.PetBreed;
        model.PetBreedId = advertisement.PetBreedId;
        model.PetColorId = advertisement.PetColorId;     
        model.PetColor = advertisement.PetColor;     
    }    

    void Cancel() => MudDialog.Cancel();
}
@page "/profile"
@layout MainLayout

@using PetProject.Web.Pages.Profile.Models
@using PetProject.Web.Pages.Profile.Dialog
@using System.ComponentModel.DataAnnotations
@using PetProject.Web.Pages.Profile.Services

@inject IProfileService profileService
@inject IDialogService DialogService

@attribute [Authorize]

<MudContainer Class="mt-16" MaxWidth="MaxWidth.Medium">
    <MudText Typo="Typo.h3" Align="Align.Center" GutterBottom="true">Your profile</MudText>
    <MudGrid Spacing="6" Class="mt-16">
        <MudItem xs="7">
            <MudText Typo="Typo.h5" GutterBottom="true" Align="Align.Center">Your data</MudText>
            <MudGrid>
                <MudItem xs="12">
                    <MudTextField T="string"  Label="Email" />@email
                </MudItem>
                <MudItem xs="12">
                    <MudTextField T="string" Label="Name" />@name
                </MudItem>
                <MudItem xs="12">
                    <MudTextField T="string" Label="Surname" />@surname
                </MudItem>
                <MudItem xs="12">
                    <MudTextField T="string" Label="Patronymic" />@patronymic
                </MudItem>
                <MudItem xs="12">
                    <MudTextField T="string" Label="Nickname" />@nickname
                </MudItem>
               @* <MudItem xs="12">
                    <MudTextField T="string" Label="Mobile number" />@mobileNumber
                </MudItem>   
                <MudItem xs="12">
                    <MudTextField T="string" Label="Age" />@age
                </MudItem>  *@ 
                <MudItem xs="12" Class="d-flex justify-center">
                    <MudButton Variant="Variant.Filled" DisableElevation="true" Color="Color.Tertiary" Size="Size.Large" Class="mt-8">Change</MudButton>
                </MudItem>
            </MudGrid>
        </MudItem>
    </MudGrid>
</MudContainer>

@code
{

    private ProfileModel profileModel = new ProfileModel();

    private string email;
    private string name;
    private string surname;
    private string patronymic;
    private string nickname;
    //private string mobileNumber;
    //private string age;


    protected override async Task OnInitializedAsync()
    {
        try
        {
            profileModel = await profileService.GetProfile();
            email = profileModel.Email;
            name = profileModel.Name;
            surname = profileModel.Surname;
            patronymic = profileModel.Patronymic;
            nickname = profileModel.NickName;
            //mobileNumber = profileModel.MobilePhone;
            //age = profileModel.Age;

        }
        catch(Exception ex)
        {
            throw new Exception(ex.Message);
        }
    }
}